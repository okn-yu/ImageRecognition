# Capter2 局所特徴
* 局所特徴の抽出は前半の検出と後半の記述からなる
* 検出は画像中の角や縁のような点を捉える過程で、記述は検出の過程で得た点の周りの局所領域を表現する処理
* 前者のアルゴリズムを検出器、後者の記述されたベクトルを記述子と呼ぶ

## 2.1 局所特徴とは
* 画像全体を表現する特徴を大域特徴と呼び、画像中の局所的な領域を表現する特徴を局所特徴と呼ぶ
* 画像全体の中から特定の物体を検出するには、大域特徴よりも局所特徴の比較が重要
* 局所特徴が満たすべき性質は「再現性」「頑健性」「不変性」「弁別性」

#### メモ
* 以下がOpenCVのチュートリアルが参考になる
* http://labs.eecs.tottori-u.ac.jp/sd/Member/oyamada/OpenCV/html/py_tutorials/py_feature2d/py_table_of_contents_feature2d/py_table_of_contents_feature2d.html

## 2.2 検出器
* 疎なサンプリングの場合、何らかの基準に従って画像全体から特徴点（キーポイント）が抽出される
* 検出器の例として「エッジ検出器」「コーナ検出器」「ブロブ検出器」がある

#### メモ
* ブロブとはエッジやコーナーのように点として捉えることは困難だが、領域として捉えることで特徴的となる周囲の領域とは異なる小領域
* 例えば直方体の画像の場合、エッジやコーナーはオブジェクトの特徴になり得るが、面は特徴になり得ないのは明らか
* そもそも局所特徴や帯域特徴の特徴とはなにか？
* 結局のところ画像を認識するには、画像全体から最終的には何らかの手法でベクトルに変換する必要がある
* 画像→ベクトルにおいて、次元の大幅な圧縮がなされるわけだが、ベクトルには画像の認識に必要となる情報が濃縮される必要がある
* 特徴とはこの画像の濃縮の元に相当する
* 「亀裂の写った画像の分類」では、「亀裂の長さ」「亀裂の方向」「亀裂のコーナ」などが特徴となる
* そのためどの特徴が有効かは、当然だが画像の種類によって全く異なり、エッジやコーナやブロブ以外が有効な特徴となるケースも当然存在する

## 2.3 空間フィルタリング
* 注目画素とその近傍領域の画素値を入力として出力画素に対応する画素値を計算する操作 
* 空間フィルタリングには相関と畳込みが存在する
* エッジやコーナなどの抽出に用いられる
* 線形の空間フィルタリングと非線形の空間フィルタリングに分類される
* 畳み込み演算には結合則や交換則が成立する

#### メモ
* 相関と畳込みの差として、相関では結合則や交換則が成立しない
* 相関はカーネルと対象領域の形状が近い場合に大きな出力となる
* そのため相関はテンプレートマッチングに利用できる
* 一方畳み込みは画素とカーネルの合成（カーネルに沿ってピクセルを操作）に相当するため、フィルタリングや特徴抽出に利用できる
* https://cvml-expertguide.net/terms/cv/image-filtering/convolution-for-image-filtering/

## 2.4 基本的な検出器

### 2.4.1 エッジ検出器
* 1次元のエッジ検出機では方向性があるが、2次元では方向性がない
* ラプラシアンフィルタではノイズも検出してしまうため、先にガウシアンフィルタを適用することも多い

### 2.4.2 コーナ検出器
* 検出器として、ヘシアンコーナ検出器とモラベックコーナ検出器とハリスコーナ検出器とSUSANとFastコーナ検出器がある
* Fastコーナ検出器は決定木を利用する

#### メモ
* オブジェクトの判定に、コーナの有無の特徴量を尖り具合の尺度として利用できるかもしれない

### 2.4.3 ブロブ検出器
* 周囲の状況とは異なる小領域をブロブと呼ぶ
* ブロブ検出器として、LoGフィルタ、DoGフィルタ、DoH（ヘッシアンフィルタの行列式）を用いる手法がある

#### メモ
* ブロブ検出器の実装としては例えばskimageの以下が参考になる
* https://scikit-image.org/docs/stable/auto_examples/features_detection/plot_blob.html#sphx-glr-auto-examples-features-detection-plot-blob-pygit
